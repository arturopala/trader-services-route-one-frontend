@*
 * Copyright 2021 HM Revenue & Customs
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *@

@import uk.gov.hmrc.traderservices.models.{FileUploads,FileUpload,UploadRequest,FileUploadError}
@import uk.gov.hmrc.traderservices.wiring.AppConfig
@import uk.gov.hmrc.traderservices.views.UploadFileViewContext

@this(
        govukLayout: uk.gov.hmrc.traderservices.views.html.templates.GovukLayoutWrapper,
        forms: uk.gov.hmrc.traderservices.views.components.forms,
        html: uk.gov.hmrc.traderservices.views.components.html,
        details: uk.gov.hmrc.traderservices.views.html.components.details,
        govukFileUpload: GovukFileUpload,
        govukButton: GovukButton,
        appConfig: AppConfig,
        context: UploadFileViewContext
)

@(maxFileUploadsNumber: Int, initialFileUploads: Seq[FileUpload], initiateNextFileUpload: String => Call, checkFileVerificationStatus: String => Call, continueAction: Call, backLink: Call)(implicit request: Request[_], messages: Messages)

@govukLayout(
  pageTitle("view.upload-multiple-files.title"),
  backLink = Some(backLink.url)
) {

  @*
   * checkFileVerificationStatus - function accepting upscan reference and returning a call,
   *     which will return 200 with JSON payload, i.e. one of: 
   *         - {"fileStatus":"NOT_UPLOADED","uploadRequest":{"href":"https://s3.amazonaws.com/bucket/123abc","fields":{"foo1":"bar1"}}}
   *         - {"fileStatus":"POSTED"}
   *         - {"fileStatus":"ACCEPTED","fileMimeType":"application/pdf","fileName":"test.pdf","previewUrl":"/send-documents-for-customs-check/new/file-uploaded/f029444f-415c-4dec-9cf2-36774ec63ab8"}
   *         - {"fileStatus":"FAILED","errorMessage":"The selected file contains a virus - upload a different one"}
   *         - {"fileStatus":"REJECTED","errorMessage":"The selected file could not be uploaded"}
   *         - {"fileStatus":"DUPLICATE","errorMessage":"The selected file has already been uploaded"}
   *@

  @html.h1(messages("view.upload-multiple-files.heading"), classes = "govuk-heading-l")

  @forms.formWithCSRF(action = continueAction, args = 'novalidate -> "novalidate") {
      @html.button("form.upload-multiple-files.continue")
  }

}
